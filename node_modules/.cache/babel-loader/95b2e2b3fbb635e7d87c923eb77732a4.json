{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { slide } from './animation';\nimport { classNames, canUseDOM } from '@progress/kendo-react-common';\nimport { CollisionType, AlignPoint, throttle, FRAME_DURATION } from './util';\nimport { AlignService } from './services/alignService';\nimport { DOMService } from './services/domService';\nimport { PositionService } from './services/positionService';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n\nfunction isEquivalent(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!!a !== !!b) {\n    return false;\n  }\n\n  var aProps = Object.getOwnPropertyNames(a);\n  var bProps = Object.getOwnPropertyNames(b);\n\n  if (aProps.length !== bProps.length) {\n    return false;\n  }\n\n  for (var i = 0; i < aProps.length; i++) {\n    var propName = aProps[i];\n\n    if (a[propName] !== b[propName]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar DEFAULT_OFFSET = {\n  left: -1000,\n  top: 0\n};\nvar Status;\n\n(function (Status) {\n  Status[\"hiding\"] = \"hiding\";\n  Status[\"hidden\"] = \"hidden\";\n  Status[\"showing\"] = \"showing\";\n  Status[\"shown\"] = \"shown\";\n  Status[\"reposition\"] = \"reposition\";\n})(Status || (Status = {}));\n\nvar ANIMATION_CONTAINER = 'k-animation-container';\nvar ANIMATION_CONTAINER_SHOWN = 'k-animation-container-shown';\nvar ANIMATION_CONTAINER_RELATIVE = 'k-animation-container-relative';\nvar ANIMATION_CONTAINER_CHILD = 'k-child-animation-container';\nvar K_POPUP = 'k-popup';\n/**\n * @hidden\n */\n\nvar Popup =\n/** @class */\nfunction (_super) {\n  __extends(Popup, _super);\n\n  function Popup(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {\n      current: Status.hidden,\n      previous: Status.hidden,\n      props: {}\n    };\n    _this._popup = null;\n\n    _this.show = function (popup) {\n      _this.setPosition(popup);\n\n      _this.animate(popup.firstChild, 'enter', _this.onOpened);\n\n      _this.setState({\n        current: Status.shown,\n        previous: _this.state.current\n      });\n    };\n\n    _this.setPosition = function (popup) {\n      var _a = _this.props,\n          anchorAlign = _a.anchorAlign,\n          popupAlign = _a.popupAlign,\n          collision = _a.collision,\n          offset = _a.offset,\n          anchor = _a.anchor;\n      var popupContent = popup.firstElementChild;\n\n      var _b = getComputedStyle(popupContent),\n          contentWidth = _b.width,\n          contentHeight = _b.height; // The absolute position prevents appearing of a scrollbar which could move the anchor element and breaks the positioning.\n\n\n      popupContent.style.position = 'absolute'; // Width and height are required since absolute position breaks the element sizing.\n\n      popupContent.style.width = contentWidth;\n      popupContent.style.height = contentHeight;\n\n      var alignedOffset = _this._alignService.alignElement({\n        anchor: anchor,\n        element: popupContent,\n        elementAlign: popupAlign,\n        anchorAlign: anchorAlign,\n        offset: offset\n      });\n\n      var position = _this._positionService.positionElement({\n        anchor: anchor,\n        anchorAlign: anchorAlign,\n        collisions: collision,\n        element: popupContent,\n        currentLocation: alignedOffset,\n        elementAlign: popupAlign\n      });\n\n      if (position.offset) {\n        popup.style.top = position.offset.top + 'px';\n        popup.style.left = position.offset.left + 'px';\n        popupContent.style.position = '';\n        popupContent.style.width = '';\n        popupContent.style.height = '';\n      }\n\n      _this._flipped = position.flipped;\n    };\n\n    _this.onOpened = function () {\n      var element = _this._popup;\n\n      if (!element) {\n        return;\n      }\n\n      if (_this.props.show) {\n        element.classList.add(ANIMATION_CONTAINER_SHOWN);\n      }\n\n      _this.attachRepositionHandlers(element);\n\n      if (_this.props.onOpen) {\n        _this.props.onOpen.call(undefined, {\n          target: _this\n        });\n      }\n    };\n\n    _this.animate = function (element, type, callback) {\n      slide(element, _this._flipped ? 'up' : 'down', _this.animationDuration[type], type, callback);\n    };\n\n    _this.onClosing = function (popup) {\n      if (!_this.props.show) {\n        popup.classList.remove(ANIMATION_CONTAINER_SHOWN);\n      }\n\n      _this.detachRepositionHandlers();\n    };\n\n    _this.onClosed = function () {\n      if (_this.state.current === Status.hiding && _this.state.previous === Status.shown) {\n        _this.setState({\n          current: Status.hidden,\n          previous: _this.state.current\n        });\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose.call(undefined, {\n          target: _this\n        });\n      }\n    };\n\n    validatePackage(packageMetadata);\n    _this._domService = new DOMService();\n    _this._alignService = new AlignService(_this._domService);\n    _this._positionService = new PositionService(_this._domService);\n    _this.reposition = throttle(_this.reposition.bind(_this), FRAME_DURATION);\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  Popup.getDerivedStateFromProps = function (props, state) {\n    var show = props.show,\n        anchor = props.anchor,\n        anchorAlign = props.anchorAlign,\n        appendTo = props.appendTo,\n        collision = props.collision,\n        popupAlign = props.popupAlign,\n        className = props.className,\n        popupClass = props.popupClass,\n        style = props.style,\n        offset = props.offset,\n        contentKey = props.contentKey;\n\n    var nextState = __assign({}, state, {\n      props: {\n        show: show,\n        anchor: anchor,\n        anchorAlign: anchorAlign,\n        appendTo: appendTo,\n        collision: collision,\n        popupAlign: popupAlign,\n        className: className,\n        popupClass: popupClass,\n        style: style,\n        offset: offset,\n        contentKey: contentKey\n      }\n    });\n\n    if (props.show) {\n      if (state.current === Status.hidden || state.current === Status.hiding) {\n        return __assign({}, nextState, {\n          current: Status.showing,\n          previous: state.current\n        });\n      }\n\n      if (state.current === Status.showing) {\n        return __assign({}, nextState, {\n          current: Status.shown,\n          previous: state.current\n        });\n      }\n\n      if (state.current === Status.shown && (!isEquivalent(offset, state.props.offset) || !isEquivalent(anchorAlign, state.props.anchorAlign) || !isEquivalent(appendTo, state.props.appendTo) || !isEquivalent(collision, state.props.collision) || !isEquivalent(popupAlign, state.props.popupAlign) || !isEquivalent(style, state.props.style) || anchor !== state.props.anchor || popupClass !== state.props.popupClass || className !== state.props.className)) {\n        return __assign({}, nextState, {\n          current: Status.reposition,\n          previous: state.current\n        });\n      }\n\n      return nextState;\n    }\n\n    if (state.current === Status.hiding || state.current === Status.hidden) {\n      return __assign({}, nextState, {\n        current: Status.hidden,\n        previous: state.current\n      });\n    }\n\n    return __assign({}, nextState, {\n      current: Status.hiding,\n      previous: state.current\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.componentDidUpdate = function (prevProps) {\n    if (this.state.current === Status.showing && this._popup) {\n      this.show(this._popup);\n    } else if (this.state.current === Status.hiding && this._popup) {\n      this.onClosing(this._popup);\n      this.animate(this._popup.firstChild, 'exit', this.onClosed);\n    } else if (this.state.current === Status.reposition && this.state.previous === Status.shown) {\n      this.setState({\n        current: Status.shown,\n        previous: this.state.current\n      });\n    } else if (this.state.current === Status.shown && prevProps.contentKey !== this.props.contentKey && this._popup) {\n      this.setPosition(this._popup);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.componentDidMount = function () {\n    if (this.state.current === Status.showing && this._popup) {\n      this.show(this._popup);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.componentWillUnmount = function () {\n    this.detachRepositionHandlers();\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        className = _a.className,\n        popupClass = _a.popupClass,\n        show = _a.show,\n        id = _a.id;\n    var appendTo = this.props.appendTo ? this.props.appendTo : canUseDOM ? this.props.anchor && this.props.anchor.ownerDocument ? this.props.anchor.ownerDocument.body : document.body : undefined;\n\n    if (this.state.current === Status.reposition && this.state.previous === Status.shown && this._popup) {\n      this.setPosition(this._popup);\n    }\n\n    var style = Object.assign({}, {\n      position: 'absolute'\n    }, this.props.style || {});\n    var closing = this.state.current === Status.hiding;\n\n    if ((show || closing) && appendTo) {\n      var popup = React.createElement(\"div\", {\n        className: classNames(ANIMATION_CONTAINER, ANIMATION_CONTAINER_RELATIVE, className),\n        id: id,\n        ref: function (e) {\n          return _this._popup = e;\n        },\n        style: style\n      }, React.createElement(\"div\", {\n        className: classNames(popupClass, K_POPUP, ANIMATION_CONTAINER_CHILD),\n        style: {\n          transitionDelay: '0ms'\n        }\n      }, children));\n      return ReactDOM.createPortal(popup, appendTo);\n    }\n\n    return null;\n  };\n\n  Object.defineProperty(Popup.prototype, \"animationDuration\", {\n    get: function () {\n      var animate = this.props.animate;\n      var enter = 0;\n      var exit = 0;\n\n      if (animate) {\n        if (animate === true) {\n          enter = exit = 300;\n        } else {\n          enter = animate.openDuration || 0;\n          exit = animate.closeDuration || 0;\n        }\n      }\n\n      return {\n        enter: enter,\n        exit: exit\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Popup.prototype.attachRepositionHandlers = function (element) {\n    var _this = this;\n\n    this.detachRepositionHandlers();\n    this._scrollableParents = this._domService.scrollableParents(this.props.anchor || element);\n\n    this._scrollableParents.map(function (p) {\n      return p.addEventListener('scroll', _this.reposition);\n    });\n\n    window.addEventListener('resize', this.reposition);\n  };\n\n  Popup.prototype.detachRepositionHandlers = function () {\n    var _this = this;\n\n    if (this._scrollableParents) {\n      this._scrollableParents.map(function (p) {\n        return p.removeEventListener('scroll', _this.reposition);\n      });\n\n      this._scrollableParents = undefined;\n    }\n\n    window.removeEventListener('resize', this.reposition);\n  };\n\n  Popup.prototype.reposition = function () {\n    this.setState({\n      current: Status.reposition,\n      previous: this.state.current\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.propTypes = {\n    anchor: function (props) {\n      var anchor = props.anchor;\n\n      if (anchor && typeof anchor.nodeType !== 'number') {\n        return new Error('Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed.');\n      }\n\n      return null;\n    },\n    appendTo: function (props) {\n      var element = props.appendTo;\n\n      if (element && typeof element.nodeType !== 'number') {\n        return new Error('Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed.');\n      }\n\n      return null;\n    },\n    className: PropTypes.string,\n    id: PropTypes.string,\n    popupClass: PropTypes.string,\n    collision: PropTypes.shape({\n      horizontal: PropTypes.oneOf([CollisionType.fit, CollisionType.flip]),\n      vertical: PropTypes.oneOf([CollisionType.fit, CollisionType.flip])\n    }),\n    anchorAlign: PropTypes.shape({\n      horizontal: PropTypes.oneOf([AlignPoint.left, AlignPoint.center, AlignPoint.right]),\n      vertical: PropTypes.oneOf([AlignPoint.top, AlignPoint.center, AlignPoint.bottom])\n    }),\n    popupAlign: PropTypes.shape({\n      horizontal: PropTypes.oneOf([AlignPoint.left, AlignPoint.center, AlignPoint.right]),\n      vertical: PropTypes.oneOf([AlignPoint.top, AlignPoint.center, AlignPoint.bottom])\n    }),\n    offset: PropTypes.shape({\n      left: PropTypes.number,\n      top: PropTypes.number\n    }),\n    children: PropTypes.oneOfType([PropTypes.element, PropTypes.node]),\n    show: PropTypes.bool,\n    animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      openDuration: PropTypes.number,\n      closeDuration: PropTypes.number\n    })])\n  };\n  /**\n   * @hidden\n   */\n\n  Popup.defaultProps = {\n    collision: {\n      horizontal: CollisionType.fit,\n      vertical: CollisionType.flip\n    },\n    anchorAlign: {\n      horizontal: AlignPoint.left,\n      vertical: AlignPoint.bottom\n    },\n    popupAlign: {\n      horizontal: AlignPoint.left,\n      vertical: AlignPoint.top\n    },\n    offset: DEFAULT_OFFSET,\n    animate: true,\n    // appendTo: document.body,\n    show: false\n  };\n  return Popup;\n}(React.Component);\n\nexport { Popup };","map":{"version":3,"sources":["D:/Rnd/sofia-react-template/node_modules/@progress/kendo-react-popup/dist/es/Popup.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","ReactDOM","PropTypes","slide","classNames","canUseDOM","CollisionType","AlignPoint","throttle","FRAME_DURATION","AlignService","DOMService","PositionService","validatePackage","packageMetadata","isEquivalent","a","aProps","getOwnPropertyNames","bProps","propName","DEFAULT_OFFSET","left","top","Status","ANIMATION_CONTAINER","ANIMATION_CONTAINER_SHOWN","ANIMATION_CONTAINER_RELATIVE","ANIMATION_CONTAINER_CHILD","K_POPUP","Popup","_super","props","_this","state","current","hidden","previous","_popup","show","popup","setPosition","animate","firstChild","onOpened","setState","shown","_a","anchorAlign","popupAlign","collision","offset","anchor","popupContent","firstElementChild","_b","getComputedStyle","contentWidth","width","contentHeight","height","style","position","alignedOffset","_alignService","alignElement","element","elementAlign","_positionService","positionElement","collisions","currentLocation","_flipped","flipped","classList","add","attachRepositionHandlers","onOpen","undefined","target","type","callback","animationDuration","onClosing","remove","detachRepositionHandlers","onClosed","hiding","onClose","_domService","reposition","bind","getDerivedStateFromProps","appendTo","className","popupClass","contentKey","nextState","showing","componentDidUpdate","prevProps","componentDidMount","componentWillUnmount","render","children","id","ownerDocument","body","document","closing","createElement","ref","e","transitionDelay","createPortal","defineProperty","get","enter","exit","openDuration","closeDuration","enumerable","configurable","_scrollableParents","scrollableParents","map","addEventListener","window","removeEventListener","propTypes","nodeType","Error","string","shape","horizontal","oneOf","fit","flip","vertical","center","right","bottom","number","oneOfType","node","bool","defaultProps","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { slide } from './animation';\nimport { classNames, canUseDOM } from '@progress/kendo-react-common';\nimport { CollisionType, AlignPoint, throttle, FRAME_DURATION } from './util';\nimport { AlignService } from './services/alignService';\nimport { DOMService } from './services/domService';\nimport { PositionService } from './services/positionService';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\nfunction isEquivalent(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!!a !== !!b) {\n        return false;\n    }\n    var aProps = Object.getOwnPropertyNames(a);\n    var bProps = Object.getOwnPropertyNames(b);\n    if (aProps.length !== bProps.length) {\n        return false;\n    }\n    for (var i = 0; i < aProps.length; i++) {\n        var propName = aProps[i];\n        if (a[propName] !== b[propName]) {\n            return false;\n        }\n    }\n    return true;\n}\nvar DEFAULT_OFFSET = {\n    left: -1000,\n    top: 0\n};\nvar Status;\n(function (Status) {\n    Status[\"hiding\"] = \"hiding\";\n    Status[\"hidden\"] = \"hidden\";\n    Status[\"showing\"] = \"showing\";\n    Status[\"shown\"] = \"shown\";\n    Status[\"reposition\"] = \"reposition\";\n})(Status || (Status = {}));\nvar ANIMATION_CONTAINER = 'k-animation-container';\nvar ANIMATION_CONTAINER_SHOWN = 'k-animation-container-shown';\nvar ANIMATION_CONTAINER_RELATIVE = 'k-animation-container-relative';\nvar ANIMATION_CONTAINER_CHILD = 'k-child-animation-container';\nvar K_POPUP = 'k-popup';\n/**\n * @hidden\n */\nvar Popup = /** @class */ (function (_super) {\n    __extends(Popup, _super);\n    function Popup(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.state = { current: Status.hidden, previous: Status.hidden, props: {} };\n        _this._popup = null;\n        _this.show = function (popup) {\n            _this.setPosition(popup);\n            _this.animate(popup.firstChild, 'enter', _this.onOpened);\n            _this.setState({ current: Status.shown, previous: _this.state.current });\n        };\n        _this.setPosition = function (popup) {\n            var _a = _this.props, anchorAlign = _a.anchorAlign, popupAlign = _a.popupAlign, collision = _a.collision, offset = _a.offset, anchor = _a.anchor;\n            var popupContent = popup.firstElementChild;\n            var _b = getComputedStyle(popupContent), contentWidth = _b.width, contentHeight = _b.height;\n            // The absolute position prevents appearing of a scrollbar which could move the anchor element and breaks the positioning.\n            popupContent.style.position = 'absolute';\n            // Width and height are required since absolute position breaks the element sizing.\n            popupContent.style.width = contentWidth;\n            popupContent.style.height = contentHeight;\n            var alignedOffset = _this._alignService.alignElement({\n                anchor: anchor,\n                element: popupContent,\n                elementAlign: popupAlign,\n                anchorAlign: anchorAlign,\n                offset: offset\n            });\n            var position = _this._positionService.positionElement({\n                anchor: anchor,\n                anchorAlign: anchorAlign,\n                collisions: collision,\n                element: popupContent,\n                currentLocation: alignedOffset,\n                elementAlign: popupAlign\n            });\n            if (position.offset) {\n                popup.style.top = position.offset.top + 'px';\n                popup.style.left = position.offset.left + 'px';\n                popupContent.style.position = '';\n                popupContent.style.width = '';\n                popupContent.style.height = '';\n            }\n            _this._flipped = position.flipped;\n        };\n        _this.onOpened = function () {\n            var element = _this._popup;\n            if (!element) {\n                return;\n            }\n            if (_this.props.show) {\n                element.classList.add(ANIMATION_CONTAINER_SHOWN);\n            }\n            _this.attachRepositionHandlers(element);\n            if (_this.props.onOpen) {\n                _this.props.onOpen.call(undefined, { target: _this });\n            }\n        };\n        _this.animate = function (element, type, callback) {\n            slide(element, _this._flipped ? 'up' : 'down', _this.animationDuration[type], type, callback);\n        };\n        _this.onClosing = function (popup) {\n            if (!_this.props.show) {\n                popup.classList.remove(ANIMATION_CONTAINER_SHOWN);\n            }\n            _this.detachRepositionHandlers();\n        };\n        _this.onClosed = function () {\n            if (_this.state.current === Status.hiding && _this.state.previous === Status.shown) {\n                _this.setState({ current: Status.hidden, previous: _this.state.current });\n            }\n            if (_this.props.onClose) {\n                _this.props.onClose.call(undefined, { target: _this });\n            }\n        };\n        validatePackage(packageMetadata);\n        _this._domService = new DOMService();\n        _this._alignService = new AlignService(_this._domService);\n        _this._positionService = new PositionService(_this._domService);\n        _this.reposition = throttle(_this.reposition.bind(_this), FRAME_DURATION);\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    Popup.getDerivedStateFromProps = function (props, state) {\n        var show = props.show, anchor = props.anchor, anchorAlign = props.anchorAlign, appendTo = props.appendTo, collision = props.collision, popupAlign = props.popupAlign, className = props.className, popupClass = props.popupClass, style = props.style, offset = props.offset, contentKey = props.contentKey;\n        var nextState = __assign({}, state, { props: {\n                show: show, anchor: anchor, anchorAlign: anchorAlign, appendTo: appendTo, collision: collision, popupAlign: popupAlign, className: className, popupClass: popupClass, style: style, offset: offset, contentKey: contentKey\n            } });\n        if (props.show) {\n            if (state.current === Status.hidden || state.current === Status.hiding) {\n                return __assign({}, nextState, { current: Status.showing, previous: state.current });\n            }\n            if (state.current === Status.showing) {\n                return __assign({}, nextState, { current: Status.shown, previous: state.current });\n            }\n            if (state.current === Status.shown &&\n                (!isEquivalent(offset, state.props.offset) ||\n                    !isEquivalent(anchorAlign, state.props.anchorAlign) ||\n                    !isEquivalent(appendTo, state.props.appendTo) ||\n                    !isEquivalent(collision, state.props.collision) ||\n                    !isEquivalent(popupAlign, state.props.popupAlign) ||\n                    !isEquivalent(style, state.props.style) ||\n                    anchor !== state.props.anchor ||\n                    popupClass !== state.props.popupClass ||\n                    className !== state.props.className)) {\n                return __assign({}, nextState, { current: Status.reposition, previous: state.current });\n            }\n            return nextState;\n        }\n        if (state.current === Status.hiding || state.current === Status.hidden) {\n            return __assign({}, nextState, { current: Status.hidden, previous: state.current });\n        }\n        return __assign({}, nextState, { current: Status.hiding, previous: state.current });\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.componentDidUpdate = function (prevProps) {\n        if (this.state.current === Status.showing && this._popup) {\n            this.show(this._popup);\n        }\n        else if (this.state.current === Status.hiding && this._popup) {\n            this.onClosing(this._popup);\n            this.animate(this._popup.firstChild, 'exit', this.onClosed);\n        }\n        else if (this.state.current === Status.reposition && this.state.previous === Status.shown) {\n            this.setState({ current: Status.shown, previous: this.state.current });\n        }\n        else if (this.state.current === Status.shown &&\n            prevProps.contentKey !== this.props.contentKey && this._popup) {\n            this.setPosition(this._popup);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.componentDidMount = function () {\n        if (this.state.current === Status.showing && this._popup) {\n            this.show(this._popup);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.componentWillUnmount = function () {\n        this.detachRepositionHandlers();\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, children = _a.children, className = _a.className, popupClass = _a.popupClass, show = _a.show, id = _a.id;\n        var appendTo = this.props.appendTo ?\n            this.props.appendTo :\n            canUseDOM ?\n                (this.props.anchor && this.props.anchor.ownerDocument ? this.props.anchor.ownerDocument.body : document.body)\n                : undefined;\n        if (this.state.current === Status.reposition && this.state.previous === Status.shown && this._popup) {\n            this.setPosition(this._popup);\n        }\n        var style = Object.assign({}, { position: 'absolute' }, this.props.style || {});\n        var closing = this.state.current === Status.hiding;\n        if ((show || closing) && appendTo) {\n            var popup = (React.createElement(\"div\", { className: classNames(ANIMATION_CONTAINER, ANIMATION_CONTAINER_RELATIVE, className), id: id, ref: function (e) { return _this._popup = e; }, style: style },\n                React.createElement(\"div\", { className: classNames(popupClass, K_POPUP, ANIMATION_CONTAINER_CHILD), style: { transitionDelay: '0ms' } }, children)));\n            return ReactDOM.createPortal(popup, appendTo);\n        }\n        return null;\n    };\n    Object.defineProperty(Popup.prototype, \"animationDuration\", {\n        get: function () {\n            var animate = this.props.animate;\n            var enter = 0;\n            var exit = 0;\n            if (animate) {\n                if (animate === true) {\n                    enter = exit = 300;\n                }\n                else {\n                    enter = animate.openDuration || 0;\n                    exit = animate.closeDuration || 0;\n                }\n            }\n            return { enter: enter, exit: exit };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Popup.prototype.attachRepositionHandlers = function (element) {\n        var _this = this;\n        this.detachRepositionHandlers();\n        this._scrollableParents = this._domService.scrollableParents(this.props.anchor || element);\n        this._scrollableParents.map(function (p) { return p.addEventListener('scroll', _this.reposition); });\n        window.addEventListener('resize', this.reposition);\n    };\n    Popup.prototype.detachRepositionHandlers = function () {\n        var _this = this;\n        if (this._scrollableParents) {\n            this._scrollableParents.map(function (p) { return p.removeEventListener('scroll', _this.reposition); });\n            this._scrollableParents = undefined;\n        }\n        window.removeEventListener('resize', this.reposition);\n    };\n    Popup.prototype.reposition = function () {\n        this.setState({ current: Status.reposition, previous: this.state.current });\n    };\n    /**\n     * @hidden\n     */\n    Popup.propTypes = {\n        anchor: function (props) {\n            var anchor = props.anchor;\n            if (anchor && typeof anchor.nodeType !== 'number') {\n                return new Error('Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed.');\n            }\n            return null;\n        },\n        appendTo: function (props) {\n            var element = props.appendTo;\n            if (element && typeof element.nodeType !== 'number') {\n                return new Error('Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed.');\n            }\n            return null;\n        },\n        className: PropTypes.string,\n        id: PropTypes.string,\n        popupClass: PropTypes.string,\n        collision: PropTypes.shape({\n            horizontal: PropTypes.oneOf([\n                CollisionType.fit,\n                CollisionType.flip\n            ]),\n            vertical: PropTypes.oneOf([\n                CollisionType.fit,\n                CollisionType.flip\n            ])\n        }),\n        anchorAlign: PropTypes.shape({\n            horizontal: PropTypes.oneOf([\n                AlignPoint.left,\n                AlignPoint.center,\n                AlignPoint.right\n            ]),\n            vertical: PropTypes.oneOf([\n                AlignPoint.top,\n                AlignPoint.center,\n                AlignPoint.bottom\n            ])\n        }),\n        popupAlign: PropTypes.shape({\n            horizontal: PropTypes.oneOf([\n                AlignPoint.left,\n                AlignPoint.center,\n                AlignPoint.right\n            ]),\n            vertical: PropTypes.oneOf([\n                AlignPoint.top,\n                AlignPoint.center,\n                AlignPoint.bottom\n            ])\n        }),\n        offset: PropTypes.shape({\n            left: PropTypes.number,\n            top: PropTypes.number\n        }),\n        children: PropTypes.oneOfType([\n            PropTypes.element,\n            PropTypes.node\n        ]),\n        show: PropTypes.bool,\n        animate: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.shape({\n                openDuration: PropTypes.number,\n                closeDuration: PropTypes.number\n            })\n        ])\n    };\n    /**\n     * @hidden\n     */\n    Popup.defaultProps = {\n        collision: {\n            horizontal: CollisionType.fit,\n            vertical: CollisionType.flip\n        },\n        anchorAlign: {\n            horizontal: AlignPoint.left,\n            vertical: AlignPoint.bottom\n        },\n        popupAlign: {\n            horizontal: AlignPoint.left,\n            vertical: AlignPoint.top\n        },\n        offset: DEFAULT_OFFSET,\n        animate: true,\n        // appendTo: document.body,\n        show: false\n    };\n    return Popup;\n}(React.Component));\nexport { Popup };\n"]},"metadata":{},"sourceType":"module"}