{"ast":null,"code":"var _jsxFileName = \"D:\\\\Rnd\\\\sleepyowl\\\\src\\\\pages\\\\book\\\\Modal.js\";\nimport React, { Component } from 'react';\nimport ModalContent from './ModalContent';\nimport ModalTrigger from './ModalTrigger';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Modal extends Component {\n  constructor() {\n    super();\n\n    this.showModal = () => {\n      this.setState({\n        isShown: true\n      }, () => {\n        this.closeButton.focus();\n      });\n      this.toggleScrollLock();\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        isShown: false\n      });\n      this.TriggerButton.focus();\n      this.toggleScrollLock();\n    };\n\n    this.onKeyDown = event => {\n      if (event.keyCode === 27) {\n        this.closeModal();\n      }\n    };\n\n    this.onClickOutside = event => {\n      if (this.modal && this.modal.contains(event.target)) return;\n      this.closeModal();\n    };\n\n    this.toggleScrollLock = () => {\n      document.querySelector('html').classList.toggle('scroll-lock');\n    };\n\n    this.state = {\n      isShown: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ModalTrigger, {\n        showModal: this.showModal,\n        buttonRef: n => this.TriggerButton = n,\n        triggerText: this.props.modalProps.triggerText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), this.state.isShown ? /*#__PURE__*/_jsxDEV(ModalContent, {\n        modalRef: n => this.modal = n,\n        buttonRef: n => this.closeButton = n,\n        closeModal: this.closeModal,\n        content: this.props.modalContent,\n        onKeyDown: this.onKeyDown,\n        onClickOutside: this.onClickOutside\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default Modal;","map":{"version":3,"sources":["D:/Rnd/sleepyowl/src/pages/book/Modal.js"],"names":["React","Component","ModalContent","ModalTrigger","Modal","constructor","showModal","setState","isShown","closeButton","focus","toggleScrollLock","closeModal","TriggerButton","onKeyDown","event","keyCode","onClickOutside","modal","contains","target","document","querySelector","classList","toggle","state","render","n","props","modalProps","triggerText","modalContent"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;AACA,OAAO,MAAMC,KAAN,SAAoBH,SAApB,CAA8B;AACnCI,EAAAA,WAAW,GAAG;AACZ;;AADY,SAMdC,SANc,GAMF,MAAM;AAChB,WAAKC,QAAL,CAAc;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAd,EAAiC,MAAM;AACrC,aAAKC,WAAL,CAAiBC,KAAjB;AACD,OAFD;AAGA,WAAKC,gBAAL;AACD,KAXa;;AAAA,SAYdC,UAZc,GAYD,MAAM;AACjB,WAAKL,QAAL,CAAc;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,WAAKK,aAAL,CAAmBH,KAAnB;AACA,WAAKC,gBAAL;AACD,KAhBa;;AAAA,SAiBdG,SAjBc,GAiBFC,KAAK,IAAI;AACnB,UAAIA,KAAK,CAACC,OAAN,KAAkB,EAAtB,EAA0B;AACxB,aAAKJ,UAAL;AACD;AACF,KArBa;;AAAA,SAsBdK,cAtBc,GAsBGF,KAAK,IAAI;AACxB,UAAI,KAAKG,KAAL,IAAc,KAAKA,KAAL,CAAWC,QAAX,CAAoBJ,KAAK,CAACK,MAA1B,CAAlB,EAAqD;AACrD,WAAKR,UAAL;AACD,KAzBa;;AAAA,SA2BdD,gBA3Bc,GA2BK,MAAM;AACvBU,MAAAA,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,SAA/B,CAAyCC,MAAzC,CAAgD,aAAhD;AACD,KA7Ba;;AAEZ,SAAKC,KAAL,GAAa;AACXjB,MAAAA,OAAO,EAAE;AADE,KAAb;AAGD;;AAyBDkB,EAAAA,MAAM,GAAG;AACP,wBACE,QAAC,KAAD,CAAO,QAAP;AAAA,8BACE,QAAC,YAAD;AACE,QAAA,SAAS,EAAE,KAAKpB,SADlB;AAEE,QAAA,SAAS,EAAEqB,CAAC,IAAK,KAAKd,aAAL,GAAqBc,CAFxC;AAGE,QAAA,WAAW,EAAE,KAAKC,KAAL,CAAWC,UAAX,CAAsBC;AAHrC;AAAA;AAAA;AAAA;AAAA,cADF,EAMG,KAAKL,KAAL,CAAWjB,OAAX,gBACC,QAAC,YAAD;AACE,QAAA,QAAQ,EAAEmB,CAAC,IAAK,KAAKT,KAAL,GAAaS,CAD/B;AAEE,QAAA,SAAS,EAAEA,CAAC,IAAK,KAAKlB,WAAL,GAAmBkB,CAFtC;AAGE,QAAA,UAAU,EAAE,KAAKf,UAHnB;AAIE,QAAA,OAAO,EAAE,KAAKgB,KAAL,CAAWG,YAJtB;AAKE,QAAA,SAAS,EAAE,KAAKjB,SALlB;AAME,QAAA,cAAc,EAAE,KAAKG;AANvB;AAAA;AAAA;AAAA;AAAA,cADD,gBAUC,QAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA,cAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAqBD;;AArDkC;AAwDrC,eAAeb,KAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport ModalContent from './ModalContent';\r\nimport ModalTrigger from './ModalTrigger';\r\nexport class Modal extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      isShown: false\r\n    };\r\n  }\r\n  showModal = () => {\r\n    this.setState({ isShown: true }, () => {\r\n      this.closeButton.focus();\r\n    });\r\n    this.toggleScrollLock();\r\n  };\r\n  closeModal = () => {\r\n    this.setState({ isShown: false });\r\n    this.TriggerButton.focus();\r\n    this.toggleScrollLock();\r\n  };\r\n  onKeyDown = event => {\r\n    if (event.keyCode === 27) {\r\n      this.closeModal();\r\n    }\r\n  };\r\n  onClickOutside = event => {\r\n    if (this.modal && this.modal.contains(event.target)) return;\r\n    this.closeModal();\r\n  };\r\n\r\n  toggleScrollLock = () => {\r\n    document.querySelector('html').classList.toggle('scroll-lock');\r\n  };\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <ModalTrigger\r\n          showModal={this.showModal}\r\n          buttonRef={n => (this.TriggerButton = n)}\r\n          triggerText={this.props.modalProps.triggerText}\r\n        />\r\n        {this.state.isShown ? (\r\n          <ModalContent\r\n            modalRef={n => (this.modal = n)}\r\n            buttonRef={n => (this.closeButton = n)}\r\n            closeModal={this.closeModal}\r\n            content={this.props.modalContent}\r\n            onKeyDown={this.onKeyDown}\r\n            onClickOutside={this.onClickOutside}\r\n          />\r\n        ) : (\r\n          <React.Fragment />\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n"]},"metadata":{},"sourceType":"module"}