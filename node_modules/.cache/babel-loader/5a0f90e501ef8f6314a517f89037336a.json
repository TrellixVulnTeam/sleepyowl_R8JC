{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Draggable } from '@progress/kendo-react-common';\nimport { ResizeHandlers } from './ResizeHandlers';\n/**\n * @hidden\n */\n\nvar ANIMATION_DURATION = 200;\n/**\n * @hidden\n */\n\nvar InternalTile =\n/** @class */\nfunction (_super) {\n  __extends(InternalTile, _super);\n\n  function InternalTile() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      rtl: false\n    };\n    _this.oldSize = {};\n    _this.draggable = null;\n    _this.dragging = false;\n    _this.resizing = false;\n    _this.element = null;\n    _this.ignoreDrag = false;\n    _this.pressOffset = {\n      x: 0,\n      y: 0\n    };\n    _this.pressXY = {\n      x: 0,\n      y: 0\n    };\n    _this.currentTranslate = {\n      x: 0,\n      y: 0\n    };\n    _this.preventDataOps = undefined;\n\n    _this.handleResize = function (e, q) {\n      if (q.end) {\n        _this.handleRelease();\n\n        return;\n      }\n\n      if (!_this.element) {\n        return;\n      }\n\n      var x = e.clientX;\n      var y = e.clientY;\n      _this.resizing = true;\n      var dX = (q.direction !== 'ns' ? x - _this.pressXY.x : 0) * (_this.state.rtl ? -1 : 1);\n      var dY = q.direction !== 'ew' ? y - _this.pressXY.y : 0;\n\n      if (_this.dragElement) {\n        if (_this.state.rtl) {\n          _this.dragElement.style.marginLeft = -dX + 'px';\n        } else {\n          _this.dragElement.style.marginRight = -dX + 'px';\n        }\n\n        _this.dragElement.style.height = \"calc(100% + \" + dY + \"px)\";\n      }\n\n      _this.element.classList.add('k-layout-item-hint', 'k-layout-item-hint-resize');\n\n      if (_this.preventDataOps) {\n        return;\n      }\n\n      var col = 0;\n      var row = 0;\n\n      var wrapBox = _this.element.getBoundingClientRect();\n\n      if (dX > wrapBox.width / _this.props.defaultPosition.colSpan / 3) {\n        col = 1;\n      }\n\n      if (dX < -wrapBox.width / _this.props.defaultPosition.colSpan / 1.25) {\n        col = -1;\n      } // vertical\n\n\n      if (dY > wrapBox.height / _this.props.defaultPosition.rowSpan / 3) {\n        row = 1;\n      }\n\n      if (dY < -wrapBox.height / _this.props.defaultPosition.rowSpan / 1.25) {\n        row = -1;\n      }\n\n      if (col !== 0 || row !== 0) {\n        _this.props.update(_this.props.index, 0, 0, row, col);\n      }\n    };\n\n    _this.handlePress = function (e) {\n      if (!_this.reorderable) {\n        return;\n      }\n\n      if (!_this.dragElement) {\n        return;\n      }\n\n      _this.ignoreDrag = false;\n\n      if (_this.props.ignoreDrag && _this.props.ignoreDrag(e.event.originalEvent)) {\n        _this.ignoreDrag = true;\n        return;\n      }\n\n      if (_this.element) {\n        _this.element.style.zIndex = '10';\n\n        _this.element.classList.add('k-layout-item-hint');\n      }\n\n      _this.dragElement.classList.remove('k-cursor-grab');\n\n      _this.dragElement.classList.add('k-cursor-grabbing');\n\n      var rec = _this.dragElement.getBoundingClientRect();\n\n      _this.pressXY = {\n        x: e.event.clientX,\n        y: e.event.clientY\n      };\n      _this.pressOffset = {\n        x: e.event.clientX - rec.x,\n        y: e.event.clientY - rec.y\n      };\n    };\n\n    _this.handleDrag = function (e) {\n      if (!_this.reorderable || _this.ignoreDrag) {\n        return;\n      }\n\n      var dragElement = _this.dragElement;\n\n      if (e.event.originalEvent.defaultPrevented || !dragElement) {\n        return;\n      }\n\n      _this.dragging = true;\n      e.event.originalEvent.preventDefault();\n      var rec = dragElement.getBoundingClientRect();\n      _this.currentTranslate = {\n        x: e.event.clientX - rec.x - _this.pressOffset.x + _this.currentTranslate.x,\n        y: e.event.clientY - rec.y - _this.pressOffset.y + _this.currentTranslate.y\n      };\n      dragElement.style.transform = \"translate(\" + _this.currentTranslate.x + \"px, \" + _this.currentTranslate.y + \"px)\";\n      dragElement.style.transition = 'transform 0s';\n\n      if (_this.preventDataOps) {\n        return;\n      }\n\n      var col = 0;\n      var row = 0;\n\n      if (_this.currentTranslate.y > 0.7 * rec.height / _this.props.defaultPosition.rowSpan) {\n        row = 1;\n      }\n\n      if (_this.currentTranslate.y < 0.7 * -rec.height / _this.props.defaultPosition.rowSpan) {\n        row = -1;\n      }\n\n      if (_this.currentTranslate.x > 0.7 * rec.width / _this.props.defaultPosition.colSpan) {\n        col = 1;\n      }\n\n      if (_this.currentTranslate.x < 0.7 * -rec.width / _this.props.defaultPosition.colSpan) {\n        col = -1;\n      }\n\n      _this.props.update(_this.props.index, row, _this.state.rtl ? -col : col, 0, 0);\n    };\n\n    _this.handleRelease = function () {\n      if (!_this.reorderable) {\n        return;\n      }\n\n      _this.dragging = _this.resizing = false;\n      _this.currentTranslate = {\n        x: 0,\n        y: 0\n      };\n\n      if (_this.element) {\n        _this.element.style.zIndex = '1';\n\n        _this.element.classList.remove('k-layout-item-hint', 'k-layout-item-hint-resize');\n      }\n\n      var dragElement = _this.dragElement;\n\n      if (dragElement) {\n        dragElement.style.transform = 'translate(0px, 0px)';\n        dragElement.style.transition = \"transform \" + ANIMATION_DURATION + \"ms cubic-bezier(0.2, 0, 0, 1) 0s\";\n        dragElement.style.marginRight = '0px';\n        dragElement.style.marginLeft = '0px';\n        dragElement.style.height = '100%';\n        dragElement.classList.remove('k-cursor-grabbing');\n        dragElement.classList.add('k-cursor-grab');\n      }\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(InternalTile.prototype, \"reorderable\", {\n    get: function () {\n      return this.props.reorderable !== undefined ? this.props.reorderable : InternalTile.defaultProps.reorderable;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InternalTile.prototype, \"dragElement\", {\n    get: function () {\n      return this.draggable ? this.draggable.element : undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  InternalTile.prototype.componentDidMount = function () {\n    if (!this.element) {\n      return;\n    }\n\n    if (getComputedStyle(this.element).direction === 'rtl') {\n      this.setState({\n        rtl: true\n      });\n    }\n  };\n\n  InternalTile.prototype.render = function () {\n    var _this = this;\n\n    if (clearTimeout && typeof clearTimeout === 'function') {\n      clearTimeout(this.preventDataOps);\n      this.preventDataOps = window.setTimeout(function () {\n        _this.preventDataOps = undefined;\n      }, 200);\n    }\n\n    var position = this.props.defaultPosition;\n    var resizable = this.props.resizable !== undefined ? this.props.resizable : InternalTile.defaultProps.resizable;\n\n    var itemStyles = __assign({\n      gridColumnStart: position.col,\n      gridColumnEnd: \"span \" + position.colSpan,\n      gridRowStart: position.row,\n      gridRowEnd: \"span \" + position.rowSpan,\n      outline: 'none',\n      order: position.order\n    }, this.props.hintStyle);\n\n    var card = React.createElement(\"div\", {\n      ref: function (e) {\n        _this.draggable = e ? {\n          element: e\n        } : null;\n      },\n      className: classNames('k-tilelayout-item k-card', {\n        'k-cursor-grab': this.reorderable\n      }, this.props.className),\n      style: __assign({\n        height: '100%'\n      }, this.props.style)\n    }, this.props.children, React.createElement(ResizeHandlers, {\n      onPress: this.handlePress,\n      onResize: this.handleResize,\n      resizable: resizable,\n      rtl: this.state.rtl\n    }));\n    return React.createElement(\"div\", {\n      ref: function (e) {\n        _this.element = e;\n      },\n      style: itemStyles,\n      className: this.props.hintClassName\n    }, React.createElement(Draggable, {\n      ref: function (e) {\n        _this.draggable = e;\n      },\n      onDrag: this.handleDrag,\n      onRelease: this.handleRelease,\n      onPress: this.handlePress\n    }, card));\n  };\n  /**\n   * @hidden\n   */\n\n\n  InternalTile.prototype.getSnapshotBeforeUpdate = function (_) {\n    this.oldSize = {};\n\n    if (this.dragElement) {\n      this.oldSize = this.dragElement.getBoundingClientRect();\n    }\n\n    return null;\n  };\n  /**\n   * @hidden\n   */\n\n\n  InternalTile.prototype.componentDidUpdate = function (prevProps) {\n    var _this = this;\n\n    var dragElement = this.dragElement;\n\n    if (!dragElement) {\n      return;\n    }\n\n    var newBox = dragElement.getBoundingClientRect();\n    var oldBox = this.oldSize;\n\n    if (this.resizing) {\n      var diffCol = newBox.width - oldBox.width;\n\n      if (this.state.rtl) {\n        var currentM = parseFloat(dragElement.style.marginLeft || '0');\n        dragElement.style.marginLeft = currentM - diffCol + 'px';\n      } else {\n        var currentM = parseFloat(dragElement.style.marginRight || '0');\n        dragElement.style.marginRight = currentM + diffCol + 'px';\n      }\n\n      this.pressXY.x += this.state.rtl ? -diffCol : diffCol;\n      var diffRow = newBox.height - oldBox.height;\n      var currentBot = parseFloat(dragElement.style.height.substring(12));\n      dragElement.style.height = \"calc(100% + \" + (currentBot + diffRow) + \"px)\";\n      this.pressXY.y += diffRow;\n    }\n\n    var deltaX = oldBox.left - newBox.left;\n    var deltaY = oldBox.top - newBox.top;\n\n    if (deltaX === 0 && deltaY === 0) {\n      return;\n    }\n\n    if (this.dragging) {\n      if (prevProps.defaultPosition.order !== this.props.defaultPosition.order || prevProps.defaultPosition.col !== this.props.defaultPosition.col) {\n        this.currentTranslate.x = 0;\n        this.currentTranslate.y = 0;\n        dragElement.style.transform = '';\n      }\n\n      return;\n    }\n\n    if (Math.abs(deltaY) < 15 && Math.abs(deltaX) < 15) {\n      // improves performance and removes random flickering\n      return;\n    }\n\n    requestAnimationFrame(function () {\n      var domNode = _this.element;\n\n      if (!domNode) {\n        return;\n      }\n\n      domNode.style.transform = \"translate(\" + deltaX + \"px, \" + deltaY + \"px)\";\n      domNode.style.transition = 'transform 0s';\n      requestAnimationFrame(function () {\n        domNode.style.transform = '';\n        domNode.style.transition = \"transform \" + ANIMATION_DURATION + \"ms cubic-bezier(0.2, 0, 0, 1) 0s\";\n      });\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  InternalTile.propTypes = {\n    defaultPosition: PropTypes.object.isRequired,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    hintStyle: PropTypes.object,\n    hintClassName: PropTypes.string,\n    header: PropTypes.any,\n    body: PropTypes.any,\n    item: PropTypes.any,\n    resizable: PropTypes.oneOf(['horizontal', 'vertical', true, false]),\n    reorderable: PropTypes.bool\n  };\n  /**\n   * @hidden\n   */\n\n  InternalTile.displayName = 'KendoTileLayoutItem';\n  /**\n   * @hidden\n   */\n\n  InternalTile.defaultProps = {\n    resizable: true,\n    reorderable: true\n  };\n  return InternalTile;\n}(React.Component);\n\nexport { InternalTile };","map":{"version":3,"sources":["D:/Rnd/sofia-react-template/node_modules/@progress/kendo-react-layout/dist/es/tilelayout/InternalTile.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","PropTypes","classNames","Draggable","ResizeHandlers","ANIMATION_DURATION","InternalTile","_super","_this","state","rtl","oldSize","draggable","dragging","resizing","element","ignoreDrag","pressOffset","x","y","pressXY","currentTranslate","preventDataOps","undefined","handleResize","e","q","end","handleRelease","clientX","clientY","dX","direction","dY","dragElement","style","marginLeft","marginRight","height","classList","add","col","row","wrapBox","getBoundingClientRect","width","props","defaultPosition","colSpan","rowSpan","update","index","handlePress","reorderable","event","originalEvent","zIndex","remove","rec","handleDrag","defaultPrevented","preventDefault","transform","transition","defineProperty","get","defaultProps","enumerable","configurable","componentDidMount","getComputedStyle","setState","render","clearTimeout","window","setTimeout","position","resizable","itemStyles","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","outline","order","hintStyle","card","createElement","ref","className","children","onPress","onResize","hintClassName","onDrag","onRelease","getSnapshotBeforeUpdate","_","componentDidUpdate","prevProps","newBox","oldBox","diffCol","currentM","parseFloat","diffRow","currentBot","substring","deltaX","left","deltaY","top","Math","abs","requestAnimationFrame","domNode","propTypes","object","isRequired","string","header","any","body","item","oneOf","bool","displayName","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Draggable } from '@progress/kendo-react-common';\nimport { ResizeHandlers } from './ResizeHandlers';\n/**\n * @hidden\n */\nvar ANIMATION_DURATION = 200;\n/**\n * @hidden\n */\nvar InternalTile = /** @class */ (function (_super) {\n    __extends(InternalTile, _super);\n    function InternalTile() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            rtl: false\n        };\n        _this.oldSize = {};\n        _this.draggable = null;\n        _this.dragging = false;\n        _this.resizing = false;\n        _this.element = null;\n        _this.ignoreDrag = false;\n        _this.pressOffset = { x: 0, y: 0 };\n        _this.pressXY = { x: 0, y: 0 };\n        _this.currentTranslate = { x: 0, y: 0 };\n        _this.preventDataOps = undefined;\n        _this.handleResize = function (e, q) {\n            if (q.end) {\n                _this.handleRelease();\n                return;\n            }\n            if (!_this.element) {\n                return;\n            }\n            var x = e.clientX;\n            var y = e.clientY;\n            _this.resizing = true;\n            var dX = (q.direction !== 'ns' ? x - _this.pressXY.x : 0) * (_this.state.rtl ? -1 : 1);\n            var dY = q.direction !== 'ew' ? y - _this.pressXY.y : 0;\n            if (_this.dragElement) {\n                if (_this.state.rtl) {\n                    _this.dragElement.style.marginLeft = -dX + 'px';\n                }\n                else {\n                    _this.dragElement.style.marginRight = -dX + 'px';\n                }\n                _this.dragElement.style.height = \"calc(100% + \" + dY + \"px)\";\n            }\n            _this.element.classList.add('k-layout-item-hint', 'k-layout-item-hint-resize');\n            if (_this.preventDataOps) {\n                return;\n            }\n            var col = 0;\n            var row = 0;\n            var wrapBox = _this.element.getBoundingClientRect();\n            if (dX > wrapBox.width / _this.props.defaultPosition.colSpan / 3) {\n                col = 1;\n            }\n            if (dX < -wrapBox.width / _this.props.defaultPosition.colSpan / 1.25) {\n                col = -1;\n            }\n            // vertical\n            if (dY > wrapBox.height / _this.props.defaultPosition.rowSpan / 3) {\n                row = 1;\n            }\n            if (dY < -wrapBox.height / _this.props.defaultPosition.rowSpan / 1.25) {\n                row = -1;\n            }\n            if (col !== 0 || row !== 0) {\n                _this.props.update(_this.props.index, 0, 0, row, col);\n            }\n        };\n        _this.handlePress = function (e) {\n            if (!_this.reorderable) {\n                return;\n            }\n            if (!_this.dragElement) {\n                return;\n            }\n            _this.ignoreDrag = false;\n            if (_this.props.ignoreDrag && _this.props.ignoreDrag(e.event.originalEvent)) {\n                _this.ignoreDrag = true;\n                return;\n            }\n            if (_this.element) {\n                _this.element.style.zIndex = '10';\n                _this.element.classList.add('k-layout-item-hint');\n            }\n            _this.dragElement.classList.remove('k-cursor-grab');\n            _this.dragElement.classList.add('k-cursor-grabbing');\n            var rec = _this.dragElement.getBoundingClientRect();\n            _this.pressXY = {\n                x: e.event.clientX,\n                y: e.event.clientY\n            };\n            _this.pressOffset = {\n                x: e.event.clientX - rec.x,\n                y: e.event.clientY - rec.y\n            };\n        };\n        _this.handleDrag = function (e) {\n            if (!_this.reorderable || _this.ignoreDrag) {\n                return;\n            }\n            var dragElement = _this.dragElement;\n            if (e.event.originalEvent.defaultPrevented || !dragElement) {\n                return;\n            }\n            _this.dragging = true;\n            e.event.originalEvent.preventDefault();\n            var rec = dragElement.getBoundingClientRect();\n            _this.currentTranslate = {\n                x: e.event.clientX - rec.x - _this.pressOffset.x + _this.currentTranslate.x,\n                y: e.event.clientY - rec.y - _this.pressOffset.y + _this.currentTranslate.y\n            };\n            dragElement.style.transform = \"translate(\" + _this.currentTranslate.x + \"px, \" + _this.currentTranslate.y + \"px)\";\n            dragElement.style.transition = 'transform 0s';\n            if (_this.preventDataOps) {\n                return;\n            }\n            var col = 0;\n            var row = 0;\n            if (_this.currentTranslate.y > 0.7 * rec.height / _this.props.defaultPosition.rowSpan) {\n                row = 1;\n            }\n            if (_this.currentTranslate.y < 0.7 * -rec.height / _this.props.defaultPosition.rowSpan) {\n                row = -1;\n            }\n            if (_this.currentTranslate.x > 0.7 * rec.width / _this.props.defaultPosition.colSpan) {\n                col = 1;\n            }\n            if (_this.currentTranslate.x < 0.7 * -rec.width / _this.props.defaultPosition.colSpan) {\n                col = -1;\n            }\n            _this.props.update(_this.props.index, row, _this.state.rtl ? -col : col, 0, 0);\n        };\n        _this.handleRelease = function () {\n            if (!_this.reorderable) {\n                return;\n            }\n            _this.dragging = _this.resizing = false;\n            _this.currentTranslate = { x: 0, y: 0 };\n            if (_this.element) {\n                _this.element.style.zIndex = '1';\n                _this.element.classList.remove('k-layout-item-hint', 'k-layout-item-hint-resize');\n            }\n            var dragElement = _this.dragElement;\n            if (dragElement) {\n                dragElement.style.transform = 'translate(0px, 0px)';\n                dragElement.style.transition = \"transform \" + ANIMATION_DURATION + \"ms cubic-bezier(0.2, 0, 0, 1) 0s\";\n                dragElement.style.marginRight = '0px';\n                dragElement.style.marginLeft = '0px';\n                dragElement.style.height = '100%';\n                dragElement.classList.remove('k-cursor-grabbing');\n                dragElement.classList.add('k-cursor-grab');\n            }\n        };\n        return _this;\n    }\n    Object.defineProperty(InternalTile.prototype, \"reorderable\", {\n        get: function () {\n            return this.props.reorderable !== undefined ? this.props.reorderable : InternalTile.defaultProps.reorderable;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InternalTile.prototype, \"dragElement\", {\n        get: function () {\n            return this.draggable ? this.draggable.element : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InternalTile.prototype.componentDidMount = function () {\n        if (!this.element) {\n            return;\n        }\n        if (getComputedStyle(this.element).direction === 'rtl') {\n            this.setState({\n                rtl: true\n            });\n        }\n    };\n    InternalTile.prototype.render = function () {\n        var _this = this;\n        if (clearTimeout && typeof (clearTimeout) === 'function') {\n            clearTimeout(this.preventDataOps);\n            this.preventDataOps = window.setTimeout(function () { _this.preventDataOps = undefined; }, 200);\n        }\n        var position = this.props.defaultPosition;\n        var resizable = this.props.resizable !== undefined ? this.props.resizable : InternalTile.defaultProps.resizable;\n        var itemStyles = __assign({ gridColumnStart: position.col, gridColumnEnd: \"span \" + position.colSpan, gridRowStart: position.row, gridRowEnd: \"span \" + position.rowSpan, outline: 'none', order: position.order }, this.props.hintStyle);\n        var card = (React.createElement(\"div\", { ref: function (e) { _this.draggable = e ? ({ element: e }) : null; }, className: classNames('k-tilelayout-item k-card', { 'k-cursor-grab': this.reorderable }, this.props.className), style: __assign({ height: '100%' }, this.props.style) },\n            this.props.children,\n            React.createElement(ResizeHandlers, { onPress: this.handlePress, onResize: this.handleResize, resizable: resizable, rtl: this.state.rtl })));\n        return (React.createElement(\"div\", { ref: function (e) { _this.element = e; }, style: itemStyles, className: this.props.hintClassName },\n            React.createElement(Draggable, { ref: function (e) { _this.draggable = e; }, onDrag: this.handleDrag, onRelease: this.handleRelease, onPress: this.handlePress }, card)));\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.prototype.getSnapshotBeforeUpdate = function (_) {\n        this.oldSize = {};\n        if (this.dragElement) {\n            this.oldSize = this.dragElement.getBoundingClientRect();\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.prototype.componentDidUpdate = function (prevProps) {\n        var _this = this;\n        var dragElement = this.dragElement;\n        if (!dragElement) {\n            return;\n        }\n        var newBox = dragElement.getBoundingClientRect();\n        var oldBox = this.oldSize;\n        if (this.resizing) {\n            var diffCol = newBox.width - oldBox.width;\n            if (this.state.rtl) {\n                var currentM = parseFloat(dragElement.style.marginLeft || '0');\n                dragElement.style.marginLeft = (currentM - diffCol) + 'px';\n            }\n            else {\n                var currentM = parseFloat(dragElement.style.marginRight || '0');\n                dragElement.style.marginRight = (currentM + diffCol) + 'px';\n            }\n            this.pressXY.x += this.state.rtl ? -diffCol : diffCol;\n            var diffRow = newBox.height - oldBox.height;\n            var currentBot = parseFloat(dragElement.style.height.substring(12));\n            dragElement.style.height = \"calc(100% + \" + (currentBot + diffRow) + \"px)\";\n            this.pressXY.y += diffRow;\n        }\n        var deltaX = oldBox.left - newBox.left;\n        var deltaY = oldBox.top - newBox.top;\n        if (deltaX === 0 && deltaY === 0) {\n            return;\n        }\n        if (this.dragging) {\n            if ((prevProps.defaultPosition.order !== this.props.defaultPosition.order ||\n                prevProps.defaultPosition.col !== this.props.defaultPosition.col)) {\n                this.currentTranslate.x = 0;\n                this.currentTranslate.y = 0;\n                dragElement.style.transform = '';\n            }\n            return;\n        }\n        if (Math.abs(deltaY) < 15 && Math.abs(deltaX) < 15) {\n            // improves performance and removes random flickering\n            return;\n        }\n        requestAnimationFrame(function () {\n            var domNode = _this.element;\n            if (!domNode) {\n                return;\n            }\n            domNode.style.transform = \"translate(\" + deltaX + \"px, \" + deltaY + \"px)\";\n            domNode.style.transition = 'transform 0s';\n            requestAnimationFrame(function () {\n                domNode.style.transform = '';\n                domNode.style.transition = \"transform \" + ANIMATION_DURATION + \"ms cubic-bezier(0.2, 0, 0, 1) 0s\";\n            });\n        });\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.propTypes = {\n        defaultPosition: PropTypes.object.isRequired,\n        style: PropTypes.object,\n        className: PropTypes.string,\n        hintStyle: PropTypes.object,\n        hintClassName: PropTypes.string,\n        header: PropTypes.any,\n        body: PropTypes.any,\n        item: PropTypes.any,\n        resizable: PropTypes.oneOf(['horizontal', 'vertical', true, false]),\n        reorderable: PropTypes.bool\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.displayName = 'KendoTileLayoutItem';\n    /**\n     * @hidden\n     */\n    InternalTile.defaultProps = {\n        resizable: true,\n        reorderable: true\n    };\n    return InternalTile;\n}(React.Component));\nexport { InternalTile };\n"]},"metadata":{},"sourceType":"module"}